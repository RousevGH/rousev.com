<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Whole Domain</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
    --accent: #596BFF;
    --danger: #A4142C;
    --bg-light: #f8f8f8;
    --bg-dark: #0F1116;
    --post-light-top: #ffffff40;
    --post-light-bottom: #00000010;
    --post-dark-top: #1d212c;
    --post-dark-bottom: #07090d;
    --text-light: #1a1a1a;
    --text-dark: #eee;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: Inter, sans-serif;
    background: var(--bg-light);
    color: var(--text-light);
    padding-top: 70px;
    transition: background .35s ease, color .35s ease;
}
body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
}

.top {
    position: fixed;
    top:0; left:0; width:100%; height:60px;
    display:flex; justify-content:space-between; align-items:center;
    padding: 0 18px;
    backdrop-filter: blur(18px);
    z-index:50;
}
.headerText {
    font-size:18px;
    font-weight:600;
}
.icon {
    width: 25px; height:25px;
    cursor:pointer;
    stroke: currentColor;
    stroke-width:1.7;
    fill:none;
    transition: .25s ease;
}
body.dark .icon { color:var(--text-dark); }
body:not(.dark) .icon { color:var(--text-light); }
.icon:hover {
    color: var(--accent);
    transform: scale(1.13);
}

.sort-menu {
    position:absolute;
    right:0;
    top:40px;
    background:inherit;
    padding:8px 0;
    border-radius:10px;
    display:none;
    backdrop-filter: blur(10px);
    width:160px;
}
.sort-menu.show { display:block; }

.sort-option {
    padding:10px 14px;
    cursor:pointer;
    gap:10px;
    display:flex; align-items:center;
    transition:.2s;
}
.sort-option:hover {
    background:rgba(255,255,255,.12);
}

.container {
    max-width:900px;
    margin:0 auto;
    padding:35px 20px;
}

.post {
    padding:28px;
    margin-bottom:34px;
    border-radius:16px;
    background:linear-gradient(to bottom,var(--post-light-top),var(--post-light-bottom));
    transition:transform .25s ease, box-shadow .25s ease;
    cursor:pointer;
}
body.dark .post {
    background:linear-gradient(to bottom,var(--post-dark-top),var(--post-dark-bottom));
}
.post:hover {
    transform:translateY(-6px) scale(1.03) rotate3d(1,0,0,.35deg);
    box-shadow:0 18px 50px rgba(0,0,0,.35);
}

.post.pinned {
    border:2px solid var(--accent);
    box-shadow:0 0 22px rgba(89,107,255,.55);
}

.post img {
    width:160px; height:160px;
    object-fit:cover; border-radius:12px;
    float:right; margin-left:15px;
}

.post-title {
    font-size:24px;
    margin-bottom:12px;
    font-weight:600;
}

.tags {
    display:flex; gap:8px; margin-bottom:8px;
}
.tag {
    background:var(--accent);
    color:#fff;
    padding:4px 10px;
    border-radius:7px;
    font-size:13px;
    transition:.24s ease;
}
.tag:hover { transform:scale(1.1); }

.date {
    margin-top:12px;
    opacity:.7;
    font-size:13px;
}

.fullscreen {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.55);
    backdrop-filter:blur(12px);
    display:none; justify-content:center;
    padding:20px;
    z-index:100;
}
.fullscreen-inner {
    max-width:850px;
    width:100%;
    background:inherit;
    padding:40px 28px;
    border-radius:16px;
    animation:modalPop .35s cubic-bezier(.16,1,.3,1);
}
@keyframes modalPop {
    0% {transform:scale(.8) translateY(20px); opacity:0;}
    100% {transform:scale(1) translateY(0); opacity:1;}
}

.close {
    position:absolute;
    top:18px; right:22px;
    font-size:32px;
    cursor:pointer;
    opacity:.7;
}
.close:hover { opacity:1; }

@media(max-width:768px) {
    .post img {
        width:100%; height:220px;
        float:none; margin:0 0 10px;
    }
}
</style>
</head>

<body>

<div class="top">
    <div class="headerText">I bought the whole domain, I'm going to use the whole domain</div>
    <div style="display:flex;gap:15px;align-items:center;">
        <div class="sort">
            <svg class="icon" id="sortBtn" viewBox="0 0 24 24">
                <line x1="3" y1="6" x2="21" y2="6"/>
                <line x1="3" y1="12" x2="15" y2="12"/>
                <line x1="3" y1="18" x2="9" y2="18"/>
            </svg>
            <div class="sort-menu" id="sortMenu">
                <div class="sort-option" data-sort="date">üïì Newest First</div>
                <div class="sort-option" data-sort="random">üîÄ Shuffle</div>
                <div class="sort-option" data-sort="length">üìè Length</div>
                <div class="sort-option" data-sort="tag">üè∑Ô∏è Tag</div>
            </div>
        </div>

        <svg class="icon" id="discord" viewBox="0 0 24 24">
            <path d="M20 4s-2-1-5-1l-.5 1.3a14.7 14.7 0 0 0-2.5-.3c-1 0-1.8.2-2.5.3L9 3C6 3 4 4 4 4S2 9 2 14c3 3 7 3 7 3l1-2s-1.2-.6-2-.9l-.2-.3s.4-.1.8.1c2 1.4 6 1.4 8 0 .4-.2.8-.1.8-.1l-.2.3c-.8.3-2 .9-2 .9l1 2s4 0 7-3c0-5-2-10-2-10z"/>
        </svg>

        <svg class="icon" id="themeToggle" viewBox="0 0 24 24">
            <path d="M12 3a9 9 0 1 0 9 9A7 7 0 0 1 12 3z"/>
        </svg>
    </div>
</div>

<div class="container"><div id="posts"></div></div>

<div id="modal" class="fullscreen">
    <div class="fullscreen-inner" id="modalContent"></div>
    <div class="close" onclick="closeModal()">√ó</div>
</div>

<script>
let allPosts = [];
let sortMode = "date";

document.getElementById("themeToggle").onclick=()=>document.body.classList.toggle("dark");
document.getElementById("sortBtn").onclick=()=>document.getElementById("sortMenu").classList.toggle("show");

async function loadPosts(){
    let pin=null;
    try{
        let r=await fetch("./Posts/IMPORTANT.txt");
        if(r.ok) pin={number:-1,content:await r.text(),pinned:true};
    }catch{}

    let i=1;
    while(true){
        let r=await fetch("./Posts/Thing_"+i+".txt");
        if(!r.ok) break;
        allPosts.push({number:i,content:await r.text()});
        i++;
    }
    if(pin) allPosts.unshift(pin);
    sortPosts();
}

function extractDate(c){
    let m=c.match(/\\[(\\d{2})\\.(\\d{2})\\.(\\d{4})\\]/);
    if(!m) return new Date(0);
    return new Date(+m[3],+m[2]-1,+m[1]);
}

function contentLen(c){
    return c.split("\\n").slice(1).join("").length;
}

function sortPosts(){
    if(sortMode==="date") allPosts.sort((a,b)=>extractDate(b.content)-extractDate(a.content));
    if(sortMode==="random") allPosts.sort(()=>Math.random()-.5);
    if(sortMode==="length") allPosts.sort((a,b)=>contentLen(b.content)-contentLen(a.content));
    displayPosts();
}

function extractTags(t){
    return (t.match(/\\/#[^\\/]+\\//g)||[]).map(x=>x.replace(/[\\/#]/g,""));
}

function cleanTitle(l){
    return l.replace(/\\[\\$\\/.*?\\/\\]/g,"").replace(/\\/#[^\\/]+\\//g,"").trim();
}

function displayPosts(){
    let box=document.getElementById("posts");
    box.innerHTML="";
    allPosts.forEach(p=>{
        let L=p.content.split("\\n");
        let title=cleanTitle(L[0]);
        let tags=extractTags(L[0]);
        let imgMatch=L[0].match(/\\[\\$\\/url:(.*?)\\/\\]/);
        let img=imgMatch?imgMatch[1]:null;
        let raw=L.slice(1).join("\\n");
        let d=extractDate(p.content);
        let dateStr=d>0?d.toLocaleDateString(): "";

        let div=document.createElement("div");
        div.className="post";
        if(p.pinned) div.classList.add("pinned");

        div.innerHTML=`
            ${img?`<img src=\"${img}\">`:""}
            <div class='post-title'>${title}</div>
            <div class='tags'>${tags.map(t=>`<div class='tag'>${t}</div>`).join("")}</div>
            <div class='date'>${dateStr}</div>
        `;
        div.onclick=()=>openModal(title,raw,dateStr);
        box.append(div);
    });
}

function openModal(title,raw,date){
    let m=document.getElementById("modalContent");
    m.innerHTML=`<h2>${title}</h2><div style='white-space:pre-wrap;margin-top:18px;font-size:17px;'>${process(raw)}</div><div style='margin-top:14px;opacity:.65;'>${date}</div>`;
    document.getElementById("modal").style.display="flex";
}
function closeModal(){document.getElementById("modal").style.display="none";}
function process(t){return t.replace(/https?:\\/\\/[^\\s]+/g,u=>`<a href='${u}' target='_blank'>${u}</a>`);}

document.querySelectorAll(".sort-option").forEach(o=>{
    o.onclick=()=>{
        sortMode=o.dataset.sort;
        sortPosts();
        document.getElementById("sortMenu").classList.remove("show");
    };
});

loadPosts();
</script>
</body>
</html>
