<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>I bought the whole domain</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

:root{
  --accent:#596bff;
  --accent-soft:#8a95ff;
  --bg-light-top:#f5f6ff;
  --bg-light-bottom:#d8d9e6;
  --bg-dark-top:#060712;
  --bg-dark-bottom:#0f111b;
  --text-light:#11121a;
  --text-dark:#f4f5ff;
}

*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  min-height:100vh;
  padding-top:72px;
  background:
    radial-gradient(circle at 0 0,rgba(255,255,255,.9) 0,transparent 55%),
    radial-gradient(circle at 100% 0,rgba(255,220,245,.85) 0,transparent 55%),
    linear-gradient(to bottom,var(--bg-light-top),var(--bg-light-bottom));
  color:var(--text-light);
  -webkit-font-smoothing:antialiased;
  transition:background .3s,color .3s;
}
body.dark{
  background:
    radial-gradient(circle at 0 0,rgba(89,107,255,.35) 0,transparent 60%),
    radial-gradient(circle at 100% 0,rgba(181,22,85,.35) 0,transparent 65%),
    linear-gradient(to bottom,var(--bg-dark-top),var(--bg-dark-bottom));
  color:var(--text-dark);
}

/* HEADER */
header{
  position:fixed;
  top:0;left:0;right:0;
  height:72px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  background:linear-gradient(to bottom,rgba(255,255,255,.9),rgba(245,246,255,.9));
  border-bottom:1px solid rgba(15,16,40,.08);
  z-index:50;
  transition:transform .26s ease,background .26s ease,border-color .26s ease;
  will-change:transform;
}
body.dark header{
  background:linear-gradient(to bottom,rgba(7,9,18,.94),rgba(4,6,14,.96));
  border-bottom-color:rgba(210,220,255,.18);
}
header.hidden{
  transform:translateY(-100%);
}

.header-title{
  font-size:15px;
  font-weight:600;
  letter-spacing:-0.03em;
}

/* ICONS */
.icon-row{
  display:flex;
  gap:10px;
  align-items:center;
}
.icon-btn{
  width:34px;height:34px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  background:rgba(255,255,255,.9);
  border:1px solid rgba(15,16,40,.1);
  color:#111;
  transition:.22s ease;
  backdrop-filter:blur(6px);
}
body.dark .icon-btn{
  background:rgba(8,10,18,.9);
  border-color:rgba(255,255,255,.14);
  color:#f7f7ff;
}
.icon-btn svg{
  width:19px;
  height:19px;
  fill:currentColor;
}
.icon-btn:hover{
  color:var(--accent);
  border-color:var(--accent);
  box-shadow:0 0 14px rgba(89,107,255,.55);
  transform:scale(1.08) translateY(-1px);
}

/* SORT DROPDOWN */
.sort-wrap{
  position:relative;
}
.sort-button{
  display:flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  font-size:13px;
  border-radius:999px;
  border:1px solid rgba(15,16,40,.12);
  background:rgba(255,255,255,.9);
  cursor:pointer;
  transition:.18s ease;
}
body.dark .sort-button{
  background:rgba(12,15,26,.96);
  border-color:rgba(255,255,255,.16);
}
.sort-button span{white-space:nowrap;}
.sort-button svg{
  width:16px;height:16px;
  fill:currentColor;
}
.sort-button:hover{
  border-color:var(--accent);
  color:var(--accent);
}

.sort-menu{
  position:absolute;
  right:0;
  top:110%;
  min-width:190px;
  border-radius:10px;
  background:rgba(255,255,255,.98);
  box-shadow:0 12px 30px rgba(0,0,0,.18);
  border:1px solid rgba(15,16,40,.12);
  padding:4px;
  display:none;
  z-index:60;
}
body.dark .sort-menu{
  background:rgba(10,12,20,.98);
  border-color:rgba(255,255,255,.12);
}
.sort-menu.show{display:block;}

.sort-option{
  padding:7px 10px;
  border-radius:8px;
  font-size:13px;
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  transition:background .16s ease,color .16s ease;
}
.sort-option svg{
  width:14px;height:14px;
  opacity:.7;
}
.sort-option:hover{
  background:rgba(89,107,255,.08);
}
.sort-option.active{
  background:rgba(89,107,255,.12);
  color:var(--accent);
}
.sort-tag-input{
  width:100%;
  margin-top:4px;
  padding:6px 8px;
  border-radius:8px;
  border:1px solid rgba(15,16,40,.15);
  font-size:12px;
}
body.dark .sort-tag-input{
  background:rgba(7,9,16,.95);
  color:inherit;
  border-color:rgba(255,255,255,.18);
}

/* LAYOUT */
main{
  max-width:960px;
  margin:0 auto;
  padding:30px 18px 40px;
}
.welcome{
  font-size:16px;
  opacity:.7;
  margin-bottom:24px;
}

/* POSTS */
.post{
  width:100%;
  max-width:820px;
  margin:0 auto 28px;
  border-radius:18px;
  padding:22px 20px 18px;
  cursor:pointer;
  position:relative;
  overflow:hidden;
  background:linear-gradient(145deg,
    rgba(255,255,255,.85) 0%,
    rgba(230,233,249,.95) 100%);
  box-shadow:
    0 14px 30px rgba(0,0,0,.16),
    0 0 0 1px rgba(255,255,255,.7);
  transform:translateY(40px);
  opacity:0;
  transition:
    opacity .45s ease,
    transform .45s cubic-bezier(.16,.72,.2,1),
    box-shadow .25s ease,
    border-color .25s ease,
    background .25s ease;
  perspective:1000px;
}
body.dark .post{
  background:linear-gradient(145deg,
    rgba(24,26,38,.98) 0%,
    rgba(9,11,20,.99) 100%);
  box-shadow:0 18px 48px rgba(0,0,0,.85);
}
.post.visible{
  opacity:1;
  transform:translateY(0);
}
.post-inner{
  transform-style:preserve-3d;
  transition:transform .16s ease-out;
}
.post:not(:hover) .post-inner{
  transform:rotateX(0deg) rotateY(0deg);
}
.post:hover{
  transform:translateY(-6px) scale(1.01);
  box-shadow:0 22px 55px rgba(10,10,40,.35);
}
.post.pinned{
  border:2px solid var(--accent);
  box-shadow:
    0 0 22px rgba(120,135,255,.65),
    0 26px 60px rgba(0,0,0,.9);
}

/* content */
.post-title{
  font-size:20px;
  font-weight:600;
  margin-bottom:6px;
}
.post-body{
  font-size:14px;
  line-height:1.6;
  margin-top:4px;
  white-space:pre-wrap;
  word-wrap:break-word;
}
.post-body a{
  color:var(--accent);
  text-decoration:none;
}
.post-body a:hover{
  text-decoration:underline;
}
.post-tags{
  margin-top:10px;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.post-tag{
  font-size:11px;
  padding:4px 8px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--accent),var(--accent-soft));
  color:#fff;
  border:1px solid rgba(255,255,255,.85);
  box-shadow:0 6px 12px rgba(89,107,255,.7);
}
.post-date{
  margin-top:8px;
  font-size:12px;
  opacity:.7;
}

/* NO POSTS */
.empty{
  text-align:center;
  margin-top:60px;
  opacity:.65;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  opacity:0;
  pointer-events:none;
  transition:opacity .24s ease;
  z-index:80;
}
.modal.show{
  opacity:1;
  pointer-events:auto;
}
.modal-panel{
  max-width:860px;
  width:calc(100% - 40px);
  max-height:80vh;
  overflow:auto;
  border-radius:16px;
  padding:24px 22px 18px;
  background:linear-gradient(145deg,rgba(255,255,255,.98),rgba(236,239,255,.98));
  box-shadow:0 26px 70px rgba(0,0,0,.75);
  transform:translateY(16px) scale(.96);
  transition:transform .24s ease;
}
body.dark .modal-panel{
  background:linear-gradient(145deg,rgba(18,20,36,.98),rgba(7,9,20,.99));
  box-shadow:0 26px 80px rgba(0,0,0,.95);
}
.modal.show .modal-panel{
  transform:translateY(0) scale(1);
}
.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:10px;
}
.modal-title{
  font-size:20px;
  font-weight:600;
}
.modal-close{
  cursor:pointer;
  font-size:26px;
  opacity:.7;
}
.modal-close:hover{opacity:1;}
.modal-body{
  font-size:14px;
  line-height:1.7;
  white-space:pre-wrap;
}
.modal-tags{
  margin-top:10px;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.modal-meta{
  margin-top:12px;
  font-size:12px;
  opacity:.7;
}

/* contact modal smaller */
.modal-panel.contact{
  max-width:360px;
}

/* RESPONSIVE */
@media(max-width:768px){
  header{
    padding:0 12px;
    height:64px;
  }
  .header-title{
    font-size:14px;
  }
  main{
    padding:22px 10px 32px;
  }
  .post{
    padding:18px 14px;
  }
  .post-title{
    font-size:18px;
  }
}
</style>
</head>
<body>

<header id="topBar">
  <div class="header-title">I bought the whole domain, I'm going to use the whole domain</div>

  <div style="display:flex;align-items:center;gap:12px;">
    <div class="sort-wrap">
      <button class="sort-button" id="sortButton">
        <svg viewBox="0 0 24 24"><path d="M3 6h18v2H3zm4 5h14v2H7zm6 5h8v2h-8z"/></svg>
        <span id="sortLabel">By date</span>
      </button>
      <div class="sort-menu" id="sortMenu">
        <div class="sort-option" data-sort="default">
          <svg viewBox="0 0 24 24"><path d="M4 10h16v2H4z"/></svg>
          Default order
        </div>
        <div class="sort-option active" data-sort="date">
          <svg viewBox="0 0 24 24"><path d="M7 11h10v2H7zM5 4h14v2H5zM9 18h6v2H9z"/></svg>
          By date (newest)
        </div>
        <div class="sort-option" data-sort="random">
          <svg viewBox="0 0 24 24"><path d="M4 4h3l4 7-4 7H4l4-7zM13 4h3l4 7-4 7h-3l4-7z"/></svg>
          Random
        </div>
        <div class="sort-option" data-sort="length-asc" id="lengthSort">
          <svg viewBox="0 0 24 24"><path d="M7 4h2v16H7zM15 10h2v10h-2z"/></svg>
          By length
        </div>
        <div class="sort-option" data-sort="tag">
          <svg viewBox="0 0 24 24"><path d="M5 4h9l6 6-9 9-6-6z"/></svg>
          By tag
        </div>
        <input class="sort-tag-input" id="tagInput" placeholder="tag..." />
      </div>
    </div>

    <div class="icon-row">
      <button class="icon-btn" id="ytBtn" title="YouTube">
        <svg viewBox="0 0 24 24"><path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.55 12 3.55 12 3.55s-7.5 0-9.4.55A3 3 0 0 0 .5 6.2C0 8.07 0 12 0 12s0 3.93.5 5.81a3 3 0 0 0 2.1 2.14c1.9.5 9.4.5 9.4.5s7.5 0 9.4-.5a3 3 0 0 0 2.1-2.14C24 15.93 24 12 24 12s0-3.93-.5-5.8zM9.5 15.57V8.43L15.8 12l-6.3 3.57z"/></svg>
      </button>
      <button class="icon-btn" id="discordBtn" title="Discord">
        <svg viewBox="0 0 24 24"><path d="M20.3 4.37a19.8 19.8 0 0 0-4.88-1.51l-.08.04c-.2.42-.42.84-.63 1.25a18.3 18.3 0 0 0-5.49 0c-.21-.4-.42-.83-.62-1.25l-.09-.04C3.71 4.37.53 9.05.1 13.62l.03.06A19.9 19.9 0 0 0 6.1 21.2l.08-.03a14 14 0 0 0 1.23-2c-.66-.32-1.27-.7-1.87-1.13l-.01-.13c.12-.1.25-.2.37-.3l.08-.01c3.93 1.8 8.18 1.8 12.06 0l.08.01c.13.1.25.2.37.3l-.01.13c-.6.43-1.21.8-1.87 1.13.43.7.83 1.37 1.23 2l.08.03a19.84 19.84 0 0 0 6-3l.03-.05c.5-5.18-.84-9.68-3.55-13.67l-.03-.03zM8 15.33c-1.18 0-2.16-1.09-2.16-2.42 0-1.33.95-2.42 2.16-2.42S10.17 11.6 10 12.9c0 1.33-.96 2.43-2.17 2.43zm8 0c-1.18 0-2.16-1.09-2.16-2.42 0-1.33.95-2.42 2.16-2.42s2.16 1.09 2.16 2.42c0 1.33-.96 2.43-2.16 2.43z"/></svg>
      </button>
      <button class="icon-btn" id="mailBtn" title="Email">
        <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7L4 6h16l-8 5z"/></svg>
      </button>
      <button class="icon-btn" id="themeBtn" title="Toggle theme">
        <svg viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 9 9c0-.5 0-1-.1-1.5A7.5 7.5 0 0 1 12 3z"/></svg>
      </button>
    </div>
  </div>
</header>

<main>
  <div class="welcome">Little vault of experiments. Pieces loaded from ./posts.</div>
  <div id="postList"></div>
</main>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-panel" id="modalPanel">
    <div class="modal-header">
      <div class="modal-title" id="modalTitle"></div>
      <div class="modal-close" id="modalClose">×</div>
    </div>
    <div class="modal-tags" id="modalTags"></div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-meta" id="modalMeta"></div>
  </div>
</div>

<script>
/* THEME */
const storedTheme = localStorage.getItem('rousev-theme');
if (storedTheme === 'dark' || (!storedTheme && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)){
  document.body.classList.add('dark');
}
document.getElementById('themeBtn').addEventListener('click',()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('rousev-theme', document.body.classList.contains('dark') ? 'dark':'light');
});

/* HEADER HIDE ON SCROLL */
let lastScroll = 0;
const topBar = document.getElementById('topBar');
window.addEventListener('scroll',()=>{
  const y = window.scrollY;
  if (y > lastScroll && y > 80) topBar.classList.add('hidden');
  else topBar.classList.remove('hidden');
  lastScroll = y;
});

/* ICON POPUPS */
const modal = document.getElementById('modal');
const modalPanel = document.getElementById('modalPanel');
const modalTitle = document.getElementById('modalTitle');
const modalTags = document.getElementById('modalTags');
const modalBody = document.getElementById('modalBody');
const modalMeta = document.getElementById('modalMeta');
document.getElementById('modalClose').onclick = closeModal;
modal.addEventListener('click',e=>{ if(e.target===modal) closeModal(); });
document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeModal(); });

function openContactModal(title,text){
  modalPanel.classList.add('contact');
  modalTitle.textContent = title;
  modalTags.innerHTML = '';
  modalBody.textContent = text;
  modalMeta.textContent = '';
  modal.classList.add('show');
}
function openPostModal(title,body,tags,dateStr){
  modalPanel.classList.remove('contact');
  modalTitle.textContent = title;
  modalBody.innerHTML = body;
  modalTags.innerHTML = tags.map(t=>`<span class="post-tag">${t}</span>`).join('');
  modalMeta.textContent = dateStr ? dateStr : '';
  modal.classList.add('show');
}
function closeModal(){
  modal.classList.remove('show');
}

document.getElementById('ytBtn').onclick = ()=>window.open('https://youtube.com/@RousevGuesses','_blank');
document.getElementById('discordBtn').onclick = ()=>openContactModal('Discord','@brousev on discord');
document.getElementById('mailBtn').onclick = ()=>openContactModal('Email','contact@rousev.com');

/* POSTS & SORTING */
let allPosts = [];
let currentSort = 'date';
let lengthAsc = true;

const postList = document.getElementById('postList');
const sortButton = document.getElementById('sortButton');
const sortMenu = document.getElementById('sortMenu');
const sortLabel = document.getElementById('sortLabel');
const tagInput = document.getElementById('tagInput');

sortButton.addEventListener('click',()=>{
  sortMenu.classList.toggle('show');
});
document.addEventListener('click',e=>{
  if(!sortMenu.contains(e.target) && e.target!==sortButton) sortMenu.classList.remove('show');
});
document.querySelectorAll('.sort-option').forEach(opt=>{
  opt.addEventListener('click',()=>{
    const mode = opt.getAttribute('data-sort');
    if(mode === 'length-asc'){
      currentSort = lengthAsc ? 'length-asc':'length-desc';
      lengthAsc = !lengthAsc;
    }else{
      currentSort = mode;
    }
    document.querySelectorAll('.sort-option').forEach(o=>o.classList.remove('active'));
    opt.classList.add('active');
    updateSortLabel();
    sortMenu.classList.remove('show');
    renderPosts();
  });
});

function updateSortLabel(){
  const labels = {
    'default':'Default',
    'date':'By date',
    'random':'Random',
    'length-asc':'Length ↑',
    'length-desc':'Length ↓',
    'tag':'By tag'
  };
  sortLabel.textContent = labels[currentSort] || 'By date';
}

tagInput.addEventListener('keydown',e=>{
  if(e.key === 'Enter'){
    currentSort = 'tag';
    document.querySelectorAll('.sort-option').forEach(o=>o.classList.remove('active'));
    document.querySelector('[data-sort="tag"]').classList.add('active');
    sortMenu.classList.remove('show');
    updateSortLabel();
    renderPosts();
  }
});

/* Load posts from ./posts */
async function loadPosts(){
  const posts = [];
  let pinned = null;

  try{
    const r = await fetch('./posts/IMPORTANT.txt');
    if(r.ok){
      pinned = {number:-1, content:await r.text(), pinned:true};
    }
  }catch{}

  let i=1;
  while(true){
    try{
      const r = await fetch(`./posts/Thing_${i}.txt`);
      if(!r.ok) break;
      posts.push({number:i, content:await r.text(), pinned:false});
      i++;
    }catch{break;}
  }

  if(!posts.length && !pinned){
    postList.innerHTML = '<div class="empty">no posts</div>';
    return;
  }

  allPosts = [];
  if(pinned) allPosts.push(pinned);
  allPosts.push(...posts);
  renderPosts();
}

/* Parsing helpers */
function extractTitleAndTags(rawTitle){
  const tags = [];
  const clean = rawTitle.replace(/\/#([^/]+)\//g,(m,p)=>{
    tags.push(p.trim());
    return '';
  }).trim();
  return {title:clean || '(untitled)', tags};
}

function extractDate(lines){
  if(!lines.length) return {dateObj:null, formatted:null};
  const last = lines[lines.length-1].trim();
  const match = last.match(/\[?(\d{2})\.(\d{2})\.(\d{4})\]?/);
  if(!match) return {dateObj:null, formatted:null};
  const d = new Date(+match[3],+match[2]-1,+match[1]);
  if(isNaN(d.getTime())) return {dateObj:null, formatted:null};

  const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  const n = d.getDate();
  const suffix = (n>3 && n<21)?'th':({1:'st',2:'nd',3:'rd'}[n%10]||'th');
  const formatted = `${n}${suffix} of ${months[d.getMonth()]} ${d.getFullYear()}`;
  return {dateObj:d, formatted};
}

function processBody(text){
  const escape = s=>{
    const div=document.createElement('div');
    div.textContent=s;
    return div.innerHTML;
  };
  // inline image tokens [$//image:path//] or [$//url:url//]
  text = text.replace(/\[\$\/\/image:(.*?)\/\/\]/g,(m,p)=>`<img src="${escape(p.trim())}" style="height:1em;vertical-align:baseline;" />`);
  text = text.replace(/\[\$\/\/url:(.*?)\/\/\]/g,(m,p)=>`<img src="${escape(p.trim())}" style="height:1em;vertical-align:baseline;" />`);
  // links
  text = text.replace(/(https?:\/\/[^\s]+)/g,url=>{
    const safe = escape(url);
    return `<a href="${safe}" target="_blank" rel="noopener noreferrer">${safe}</a>`;
  });
  return text;
}

/* Sorting + rendering */
function sortedPosts(){
  let posts = [...allPosts];
  const pinnedIndex = posts.findIndex(p=>p.pinned);
  let pinned = null;
  if(pinnedIndex !== -1){
    pinned = posts.splice(pinnedIndex,1)[0];
  }

  if(currentSort === 'default'){
    posts.sort((a,b)=>a.number-b.number);
  }else if(currentSort === 'date'){
    posts.sort((a,b)=>{
      const da = extractDate(a.content.split('\n')).dateObj;
      const db = extractDate(b.content.split('\n')).dateObj;
      if(!da && !db) return a.number-b.number;
      if(!da) return 1;
      if(!db) return -1;
      return db-da;
    });
  }else if(currentSort === 'random'){
    posts.sort(()=>Math.random()-.5);
  }else if(currentSort === 'length-asc' || currentSort === 'length-desc'){
    posts.sort((a,b)=>{
      const ca = contentLength(a.content);
      const cb = contentLength(b.content);
      return currentSort === 'length-asc' ? ca-cb : cb-ca;
    });
  }else if(currentSort === 'tag'){
    const filter = tagInput.value.trim().toLowerCase();
    if(filter){
      posts = posts.filter(p=>{
        const first = p.content.split('\n')[0];
        const {tags} = extractTitleAndTags(first);
        return tags.some(t=>t.toLowerCase().includes(filter));
      });
    }
  }

  if(pinned) posts.unshift(pinned);
  return posts;
}

function contentLength(raw){
  const lines = raw.split('\n');
  const [first,...rest] = lines;
  const cleaned = rest.join('\n').replace(/\[?\d{2}\.\d{2}\.\d{4}\]?/,'');
  return cleaned.trim().length;
}

function renderPosts(){
  const posts = sortedPosts();
  postList.innerHTML = '';
  if(!posts.length){
    postList.innerHTML = '<div class="empty">no posts</div>';
    return;
  }

  posts.forEach((p,idx)=>{
    const lines = p.content.split('\n');
    const rawTitle = lines[0] || '';
    const {title,tags} = extractTitleAndTags(rawTitle);
    const dateInfo = extractDate(lines.slice(1));
    let bodyLines = [...lines.slice(1)];
    if(dateInfo.dateObj) bodyLines.pop();
    const bodyRaw = bodyLines.join('\n').trim();
    const bodyHtml = processBody(bodyRaw);

    const card = document.createElement('article');
    card.className = 'post'+(p.pinned?' pinned':'');
    card.innerHTML = `
      <div class="post-inner">
        <div class="post-title">${title}</div>
        <div class="post-body">${bodyHtml}</div>
        ${tags.length?`<div class="post-tags">${tags.map(t=>`<span class="post-tag">${t}</span>`).join('')}</div>`:''}
        ${dateInfo.formatted?`<div class="post-date">${dateInfo.formatted}</div>`:''}
      </div>
    `;
    card.addEventListener('click',()=>openPostModal(title,bodyHtml,tags,dateInfo.formatted));
    postList.appendChild(card);
  });

  setupReveal();
  setupTilt();
}

/* Scroll reveal (reversible) */
function setupReveal(){
  const cards = document.querySelectorAll('.post');
  const io = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting) e.target.classList.add('visible');
      else e.target.classList.remove('visible');
    });
  },{threshold:.3});
  cards.forEach(c=>io.observe(c));
}

/* Tilt */
function setupTilt(){
  document.querySelectorAll('.post').forEach(card=>{
    const inner = card.querySelector('.post-inner');
    card.onmousemove = e=>{
      const rect = card.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const rx = (y - rect.height/2) * -0.02;
      const ry = (x - rect.width/2) * 0.02;
      inner.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
    };
    card.onmouseleave = ()=>{
      inner.style.transform = 'rotateX(0deg) rotateY(0deg)';
    };
  });
}

/* INIT */
loadPosts();
</script>
</body>
</html>
