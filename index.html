<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rousev's sideproject</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2250%22 fill=%22%23000%22/></svg>">
    
    <!-- Open Graph / Social Media Embeds -->
    <meta property="og:title" content="OOoohhhhh so you can make this stuff embed niceeee">
    <meta property="og:description" content="this site is a testing ground for me (Rousev) to do random shit that i want to, it does not as of right now serve a purpose">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="OOoohhhhh so you can make this stuff embed niceeee">
    <meta name="twitter:description" content="this site is a testing ground for me (Rousev) to do random shit that i want to, it does not as of right now serve a purpose">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            .sort-dropdown {
                position: static;
            }

            .sort-menu {
                position: fixed;
                top: 55px;
                left: 0;
                right: 0;
                border-radius: 0;
                border-left: none;
                border-right: none;
            }

            .sort-button {
                padding: 6px 12px;
                font-size: 13px;
            }

            .sort-button svg {
                width: 14px;
                height: 14px;
            }
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom, #fafafa, #e8e8e8);
            background-attachment: fixed;
            min-height: 100vh;
            color: #2c2c2c;
            padding-top: 60px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .top-bar-left {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-dropdown {
            position: relative;
        }

        .sort-button {
            background: white;
            border: 2px solid #e5e5e5;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            color: #333;
            font-family: inherit;
        }

        .sort-button:hover {
            border-color: #3da5d9;
            color: #3da5d9;
        }

        .sort-button svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        .sort-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: white;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 200px;
            display: none;
            z-index: 1001;
        }

        .sort-menu.show {
            display: block;
        }

        .sort-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sort-option:hover {
            background: #f5f5f5;
        }

        .sort-option.active {
            background: #e8f4f9;
            color: #3da5d9;
            font-weight: 500;
        }

        .sort-option:first-child {
            border-radius: 6px 6px 0 0;
        }

        .sort-option:last-child {
            border-radius: 0 0 6px 6px;
        }

        .sort-option-arrow {
            font-size: 12px;
            opacity: 0.5;
        }

        .sort-tag-input {
            margin: 8px;
            padding: 8px 12px;
            border: 2px solid #e5e5e5;
            border-radius: 6px;
            font-size: 14px;
            width: calc(100% - 16px);
            font-family: inherit;
        }

        .sort-tag-input:focus {
            outline: none;
            border-color: #3da5d9;
        }

        .top-bar.hidden {
            transform: translateY(-100%);
        }

        .top-bar a {
            color: #333;
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: color 0.3s ease;
        }

        .top-bar a:hover {
            color: #3da5d9;
        }

        .top-bar svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        .contact-text {
            font-size: 14px;
            color: #666;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .welcome {
            font-size: 28px;
            margin-bottom: 50px;
            line-height: 1.6;
            text-align: center;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: #1a1a1a;
        }

        .blog-post {
            padding: 35px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
            position: relative;
            background-attachment: fixed;
            background-image: linear-gradient(to bottom, #c8e6f5, #7ec8e3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            display: flex;
            gap: 20px;
        }

        .blog-post-main {
            flex: 1;
            min-width: 0;
        }

        .blog-post-image {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .blog-post:hover {
            transform: scale(1.02) translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.08);
        }

        .blog-post.pinned {
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.6), 0 4px 12px rgba(0,0,0,0.15);
            transform: scale(1.05);
            margin-bottom: 45px;
        }

        @media (hover: hover) {
            .blog-post.pinned:hover {
                transform: scale(1.1) translateY(-3px);
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.7), 0 8px 20px rgba(0,0,0,0.2);
            }
        }

        .pin-icon {
            display: inline-block;
            margin-left: 10px;
            width: 20px;
            height: 20px;
            vertical-align: middle;
            transform: rotate(45deg);
            color: #888;
        }

        .blog-post.pinned .pin-icon {
            width: 28px;
            height: 28px;
        }

        .blog-post h2 {
            margin-bottom: 20px;
            color: #1a1a1a;
            font-weight: 600;
            letter-spacing: -0.01em;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .post-tags {
            display: inline-flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }

        .post-tag {
            background: #ff6b9d;
            color: white;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .post-tag:hover {
            background: #ff5088;
            transform: scale(1.05);
        }

        .blog-post-content {
            line-height: 1.5;
            white-space: pre-wrap;
            color: #3a3a3a;
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            font-weight: 400;
        }

        .blog-post-content a {
            color: #3da5d9;
            text-decoration: none;
            font-weight: 500;
        }

        .blog-post-content a:hover {
            text-decoration: underline;
        }

        .inline-image {
            height: 1em;
            width: auto;
            vertical-align: baseline;
            margin: 0 2px;
        }

        .blog-post-date {
            margin-top: 20px;
            font-size: 14px;
            color: #666;
            font-style: italic;
            font-weight: 400;
        }

        .loading {
            text-align: center;
            color: #666;
            padding: 40px;
        }

        .skeleton {
            padding: 35px;
            margin-bottom: 30px;
            border-radius: 12px;
            background: linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
        }

        .skeleton-title {
            height: 28px;
            width: 60%;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .skeleton-line {
            height: 16px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .skeleton-line:nth-child(2) { width: 100%; }
        .skeleton-line:nth-child(3) { width: 95%; }
        .skeleton-line:nth-child(4) { width: 85%; }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .add-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #3da5d9 0%, #2b8ec4 100%);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(61, 165, 217, 0.35);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 999;
        }

        .add-button.visible {
            display: flex;
            animation: slideUp 0.5s ease;
        }

        .add-button.hiding {
            animation: slideDown 0.3s ease forwards;
        }

        .add-button:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 8px 24px rgba(61, 165, 217, 0.45);
        }

        .add-button:active {
            transform: scale(1.05) translateY(-1px);
        }

        .add-button svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideDown {
            to {
                transform: translateY(100px);
                opacity: 0;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .modal.show {
            display: flex;
            background: rgba(0, 0, 0, 0.5);
        }

        .modal.hiding {
            display: flex;
            background: rgba(0, 0, 0, 0);
        }

        .modal-content {
            background: white;
            padding: 40px;
            padding-top: 50px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
            font-size: 20px;
            font-weight: 600;
            max-width: 400px;
            text-align: center;
            position: relative;
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal.hiding .modal-content {
            transform: scale(0.7);
            opacity: 0;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            color: #000;
            opacity: 0.5;
            cursor: pointer;
            padding: 5px;
            font-family: Arial;
            font-weight: 300;
            line-height: 1;
        }

        .modal-close:hover {
            opacity: 1;
        }

        .modal-content.fullscreen {
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            padding: 50px;
            background-attachment: fixed;
            background-image: linear-gradient(to bottom, #c8e6f5, #7ec8e3);
        }

        .modal-content input, .modal-content textarea {
            width: 100%;
            padding: 14px 16px;
            margin: 20px 0 10px 0;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            box-sizing: border-box;
            transition: all 0.2s ease;
        }

        .modal-content textarea {
            min-height: 150px;
            resize: vertical;
        }

        .modal-content input:focus, .modal-content textarea:focus {
            outline: none;
            border-color: #3da5d9;
            box-shadow: 0 0 0 3px rgba(61, 165, 217, 0.1);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .modal-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #3da5d9 0%, #2b8ec4 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(61, 165, 217, 0.3);
        }

        .modal-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(61, 165, 217, 0.4);
        }

        .modal-button:active {
            transform: translateY(0);
        }

        /* Mobile Optimization */
        @media (max-width: 768px) {
            body {
                padding-top: 55px;
            }

            .top-bar {
                padding: 12px 20px;
                gap: 15px;
            }

            .top-bar svg {
                width: 20px;
                height: 20px;
            }

            .contact-text {
                font-size: 12px;
            }

            .container {
                padding: 20px 15px;
            }

            .welcome {
                font-size: 22px;
                margin-bottom: 30px;
            }

            .blog-post {
                padding: 25px 20px;
                margin-bottom: 20px;
                flex-direction: column;
            }

            .blog-post-image {
                width: 100%;
                height: 200px;
            }

            .blog-post h2 {
                font-size: 22px;
            }

            .blog-post-content {
                font-size: 15px;
            }

            .add-button {
                width: 56px;
                height: 56px;
                bottom: 20px;
                right: 20px;
            }

            .add-button svg {
                width: 26px;
                height: 26px;
            }

            .modal-content {
                max-width: 90%;
                padding: 30px 20px;
                margin: 20px;
            }

            .modal-content.fullscreen {
                max-width: 95%;
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="top-bar" id="topBar">
        <div class="top-bar-left">
            <a href="https://youtube.com/@RousevGuesses" target="_blank" title="YouTube">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
            </a>
            <a href="#" onclick="openModal('discord'); return false;" title="Discord">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
            </a>
            <a href="#" onclick="openModal('email'); return false;" title="Email">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
            </a>
            <span class="contact-text">⬅️ contact me</span>
        </div>
        <div class="top-bar-right">
            <div class="sort-dropdown">
                <button class="sort-button" id="sortButton" onclick="toggleSortMenu()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/>
                    </svg>
                    <span id="sortLabel">Default</span>
                </button>
                <div class="sort-menu" id="sortMenu">
                    <div class="sort-option active" data-sort="default" onclick="setSortMode('default')">
                        Default Order
                    </div>
                    <div class="sort-option" data-sort="date" onclick="setSortMode('date')">
                        By Date
                    </div>
                    <div class="sort-option" data-sort="random" onclick="setSortMode('random')">
                        Random
                    </div>
                    <div class="sort-option" data-sort="length-asc" onclick="toggleLengthSort()">
                        <span>By Length</span>
                        <span class="sort-option-arrow" id="lengthArrow">↑</span>
                    </div>
                    <div class="sort-option" data-sort="tag" onclick="focusTagInput(event)">
                        By Tag
                    </div>
                    <input type="text" class="sort-tag-input" id="tagFilterInput" placeholder="Enter tag..." onkeyup="filterByTag(event)" onclick="event.stopPropagation()">
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="welcome">
            Hi welcome i just made this site because i was bored and i happened to own a domain
        </div>

        <div id="blogPosts">
            <div class="skeleton">
                <div class="skeleton-title"></div>
                <div class="skeleton-line"></div>
                <div class="skeleton-line"></div>
                <div class="skeleton-line"></div>
            </div>
            <div class="skeleton">
                <div class="skeleton-title"></div>
                <div class="skeleton-line"></div>
                <div class="skeleton-line"></div>
                <div class="skeleton-line"></div>
            </div>
        </div>
    </div>

    <div class="add-button" id="addButton" onclick="startSuggestion()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent"></div>
    </div>

    <script>
        // Sorting system
        let currentSort = 'default';
        let lengthDirection = 'asc';
        let allPosts = [];

        function toggleSortMenu() {
            const menu = document.getElementById('sortMenu');
            menu.classList.toggle('show');
        }

        // Close sort menu when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.querySelector('.sort-dropdown');
            const menu = document.getElementById('sortMenu');
            if (dropdown && !dropdown.contains(e.target)) {
                menu.classList.remove('show');
            }
        });

        function setSortMode(mode) {
            currentSort = mode;
            document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
            document.querySelector(`[data-sort="${mode}"]`).classList.add('active');
            
            const labels = {
                'default': 'Default',
                'date': 'By Date',
                'random': 'Random',
                'length-asc': 'Length ↑',
                'length-desc': 'Length ↓',
                'tag': 'By Tag'
            };
            
            document.getElementById('sortLabel').textContent = labels[mode] || 'Default';
            document.getElementById('sortMenu').classList.remove('show');
            
            if (mode !== 'tag') {
                document.getElementById('tagFilterInput').value = '';
            }
            
            sortAndDisplayPosts();
        }

        function toggleLengthSort() {
            if (currentSort === 'length-asc') {
                currentSort = 'length-desc';
                document.getElementById('lengthArrow').textContent = '↓';
                document.getElementById('sortLabel').textContent = 'Length ↓';
            } else {
                currentSort = 'length-asc';
                document.getElementById('lengthArrow').textContent = '↑';
                document.getElementById('sortLabel').textContent = 'Length ↑';
            }
            
            document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
            document.querySelector('[data-sort="length-asc"]').classList.add('active');
            document.getElementById('sortMenu').classList.remove('show');
            
            sortAndDisplayPosts();
        }

        function focusTagInput(e) {
            e.stopPropagation();
            document.getElementById('tagFilterInput').focus();
        }

        function filterByTag(e) {
            if (e.key === 'Enter') {
                const tag = e.target.value.trim();
                if (tag) {
                    currentSort = 'tag';
                    document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
                    document.querySelector('[data-sort="tag"]').classList.add('active');
                    document.getElementById('sortLabel').textContent = 'By Tag';
                    document.getElementById('sortMenu').classList.remove('show');
                    sortAndDisplayPosts();
                }
            }
        }

        function setTagFilter(tag) {
            document.getElementById('tagFilterInput').value = tag;
            currentSort = 'tag';
            document.querySelectorAll('.sort-option').forEach(opt => opt.classList.remove('active'));
            document.querySelector('[data-sort="tag"]').classList.add('active');
            document.getElementById('sortLabel').textContent = 'By Tag';
            sortAndDisplayPosts();
        }

        function parseDate(dateStr) {
            const match = dateStr.match(/\/\[(\d{2})\.(\d{2})\.(\d{4})\]\/$/);
            if (!match) return null;
            return new Date(match[3], match[2] - 1, match[1]);
        }

        function sortAndDisplayPosts() {
            const container = document.getElementById('blogPosts');
            let sortedPosts = [...allPosts];
            
            // Separate pinned post
            const pinnedIndex = sortedPosts.findIndex(p => p.pinned);
            let pinnedPost = null;
            if (pinnedIndex !== -1) {
                pinnedPost = sortedPosts.splice(pinnedIndex, 1)[0];
            }
            
            if (currentSort === 'default') {
                sortedPosts.sort((a, b) => a.number - b.number);
            } else if (currentSort === 'date') {
                sortedPosts.sort((a, b) => {
                    const dateA = parseDate(a.content);
                    const dateB = parseDate(b.content);
                    if (!dateA && !dateB) return a.number - b.number;
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    return dateB - dateA;
                });
            } else if (currentSort === 'random') {
                sortedPosts.sort(() => Math.random() - 0.5);
            } else if (currentSort === 'length-asc' || currentSort === 'length-desc') {
                sortedPosts.sort((a, b) => {
                    // Get actual content without title and date
                    const getContentLength = (post) => {
                        const lines = post.content.split('\n');
                        let contentLines = lines.slice(1); // Skip title
                        
                        // Remove date if present
                        const lastLine = contentLines[contentLines.length - 1]?.trim();
                        if (lastLine && lastLine.match(/\/\[\d{2}\.\d{2}\.\d{4}\]\/$/)) {
                            contentLines = contentLines.slice(0, -1);
                        }
                        
                        return contentLines.join('\n').trim().length;
                    };
                    
                    const lenA = getContentLength(a);
                    const lenB = getContentLength(b);
                    return currentSort === 'length-asc' ? lenA - lenB : lenB - lenA;
                });
            } else if (currentSort === 'tag') {
                const filterTag = document.getElementById('tagFilterInput').value.trim().toLowerCase();
                if (filterTag) {
                    sortedPosts = sortedPosts.filter(post => {
                        const lines = post.content.split('\n');
                        const rawTitle = lines[0];
                        const { title: titleWithTags } = extractTitleImage(rawTitle);
                        const { tags } = extractTags(titleWithTags);
                        return tags.some(tag => tag.toLowerCase().includes(filterTag));
                    });
                }
            }
            
            // Add pinned back at top
            if (pinnedPost) {
                sortedPosts.unshift(pinnedPost);
            }
            
            displayPosts(sortedPosts, container);
        }
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modalContent');

        function openModal(type) {
            let content = '';
            modalContent.className = 'modal-content';
            
            if (type === 'discord') {
                content = '@brousev on discord';
            } else if (type === 'email') {
                content = 'contact@rousev.com';
            } else if (type === 'schmeeg') {
                content = 'http://schmeeg.rousev.com/';
            }
            
            modalContent.innerHTML = '<button class="modal-close" onclick="closeModal()">×</button><div>' + content + '</div>';
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function closeModal() {
            modal.classList.add('hiding');
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
                modal.classList.remove('hiding');
            }, 300);
        }

        modal.addEventListener('click', function(e) {
            if (e.target === modal) closeModal();
        });

        // ESC to close modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.classList.contains('show')) {
                e.preventDefault();
                closeModal();
            }
        });

        // Easter egg
        let keys = '';
        let timeout;
        document.addEventListener('keydown', function(e) {
            // Don't trigger easter egg when typing in inputs
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            clearTimeout(timeout);
            keys += e.key.toLowerCase();
            if (keys.includes('schmeeg')) {
                openModal('schmeeg');
                keys = '';
            }
            timeout = setTimeout(() => keys = '', 2000);
        });

        // Top bar scroll
        let lastScroll = 0;
        let hasScrolled = false;
        const topBar = document.getElementById('topBar');
        const addButton = document.getElementById('addButton');

        window.addEventListener('wheel', () => {
            if (!hasScrolled) {
                hasScrolled = true;
                addButton.classList.add('visible');
            }
        }, { passive: true });

        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll <= 0) {
                topBar.classList.remove('hidden');
                if (hasScrolled && addButton.classList.contains('visible')) {
                    addButton.classList.add('hiding');
                    setTimeout(() => addButton.classList.remove('visible', 'hiding'), 300);
                }
            } else if (currentScroll > lastScroll) {
                topBar.classList.add('hidden');
            } else {
                topBar.classList.remove('hidden');
            }
            
            lastScroll = currentScroll;
        });

        // Format date
        function formatDate(lastLine) {
            const match = lastLine.match(/\/\[(\d{2})\.(\d{2})\.(\d{4})\]\/$/);
            if (!match) return null;

            const day = parseInt(match[1]);
            const month = parseInt(match[2]);
            const year = parseInt(match[3]);
            const currentYear = new Date().getFullYear();

            const months = ['January', 'February', 'March', 'April', 'May', 'June',
                          'July', 'August', 'September', 'October', 'November', 'December'];
            
            const suffix = (d) => {
                if (d > 3 && d < 21) return 'th';
                switch (d % 10) {
                    case 1: return 'st';
                    case 2: return 'nd';
                    case 3: return 'rd';
                    default: return 'th';
                }
            };

            const monthName = months[month - 1];
            const dayWithSuffix = `${day}${suffix(day)}`;

            return year === currentYear ? `${dayWithSuffix} of ${monthName}` : `${dayWithSuffix} of ${monthName} ${year}`;
        }

        // Process content for links and images
        function processContent(text) {
            // Escape HTML to prevent XSS
            const escapeHtml = (str) => {
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            };
            
            // Process images: [$//image:path//] or [$//url:url//]
            text = text.replace(/\[\$\/\/image:(.*?)\/\/\]/g, function(match, path) {
                return '<img src="' + escapeHtml(path) + '" class="inline-image" alt="">';
            });
            text = text.replace(/\[\$\/\/url:(.*?)\/\/\]/g, function(match, url) {
                return '<img src="' + escapeHtml(url) + '" class="inline-image" alt="">';
            });
            
            // Process URLs into links
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            text = text.replace(urlRegex, function(url) {
                try {
                    const urlObj = new URL(url);
                    const domain = urlObj.hostname.replace('www.', '') + (urlObj.pathname !== '/' ? urlObj.pathname : '');
                    return '<a href="' + escapeHtml(url) + '" target="_blank" rel="noopener noreferrer">' + escapeHtml(domain) + '</a>';
                } catch {
                    return url;
                }
            });
            
            return text;
        }

        // Extract title image
        function extractTitleImage(title) {
            const imageMatch = title.match(/\[\$\/\/(image|url):(.*?)\/\/\]/);
            if (imageMatch) {
                const cleanTitle = title.replace(/\[\$\/\/(image|url):.*?\/\/\]/g, '').trim();
                return { title: cleanTitle, image: imageMatch[2].trim() };
            }
            return { title, image: null };
        }

        // Extract tags from title
        function extractTags(title) {
            const tagMatches = title.match(/\/\#[^\/]+\//g);
            if (tagMatches) {
                const tags = tagMatches.map(tag => tag.slice(2, -1).trim()); // Remove /# and / and trim
                const cleanTitle = title.replace(/\/\#[^\/]+\//g, '').trim();
                return { title: cleanTitle, tags: tags };
            }
            return { title, tags: [] };
        }

        // Load blog posts
        async function loadBlogPosts() {
            const container = document.getElementById('blogPosts');
            const posts = [];
            let pinnedPost = null;
            
            // Check for IMPORTANT.txt
            try {
                const response = await fetch(`./posts/IMPORTANT.txt`);
                if (response.ok) {
                    pinnedPost = { content: await response.text(), pinned: true };
                }
            } catch (e) {}
            
            // Load Thing_N.txt files until we hit a 404
            let i = 1;
            while (true) {
                try {
                    const response = await fetch(`./posts/Thing_${i}.txt`);
                    if (!response.ok) break; // Stop when file not found
                    const content = await response.text();
                    posts.push({ number: i, content });
                    i++;
                } catch (e) {
                    break; // Stop on network error
                }
            }

            posts.sort((a, b) => a.number - b.number);

            if (posts.length === 0 && !pinnedPost) {
                const examples = [
                    { 
                        number: -1,
                        content: 'IMPORTANT: Welcome to the site! /#announcement/ /#pinned/ [$//url:https://via.placeholder.com/150//]\nThis is a pinned post with an image and tags. You can click on tags to filter posts!\n\nCheck out https://example.com for more info.\n\nThis post demonstrates all features: images, links, tags, and dates.\n/[01.01.2024]/', 
                        pinned: true 
                    },
                    { 
                        number: 1,
                        content: 'Short Post /#test/\nThis is a brief post to test length sorting. It has minimal content but still includes a date.\n/[15.10.2025]/' 
                    },
                    { 
                        number: 2,
                        content: 'Long Post with Links /#tutorial/ /#guide/\nThis is a much longer post that demonstrates how the sorting system works. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n\nYou can visit https://github.com or https://stackoverflow.com for coding help.\n\nUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\n/[20.05.2023]/' 
                    },
                    { 
                        number: 3,
                        content: 'Post with Inline Images /#design/ /#creative/\nThis post has inline images [$//url:https://via.placeholder.com/20//] mixed with text. See how they [$//url:https://via.placeholder.com/20//] flow naturally?\n\nYou can use images from URLs or local paths.\n/[12.08.2024]/' 
                    },
                    { 
                        number: 4,
                        content: 'No Date Post /#random/\nThis post has no date, so it will appear at the bottom when sorting by date. But it still works with tag filtering and length sorting!' 
                    },
                    { 
                        number: 5,
                        content: 'Recent Post /#news/ /#update/\nThis is a recent post from October 2025. It should appear near the top when sorting by date.\n\nMultiple tags make it easier to organize content.\n/[18.10.2025]/' 
                    }
                ];
                allPosts = examples;
                displayPosts(examples, container);
                return;
            }

            if (pinnedPost) posts.unshift({ ...pinnedPost, number: -1 });
            allPosts = posts;
            sortAndDisplayPosts();
        }

        function displayPosts(posts, container) {
            container.innerHTML = '';
            
            posts.forEach(post => {
                const lines = post.content.split('\n');
                const rawTitle = lines[0];
                
                // Extract image first
                const { title: titleWithTags, image } = extractTitleImage(rawTitle);
                // Then extract tags
                const { title, tags } = extractTags(titleWithTags);
                
                let lastLineIndex = lines.length - 1;
                let lastLine = lines[lastLineIndex].trim();
                
                while (lastLineIndex > 0 && lastLine === '') {
                    lastLineIndex--;
                    lastLine = lines[lastLineIndex].trim();
                }
                
                let date = null;
                let contentEndIndex = lastLineIndex;
                
                if (lastLine.match(/\/\[\d{2}\.\d{2}\.\d{4}\]\/$/)) {
                    date = formatDate(lastLine);
                    contentEndIndex = lastLineIndex - 1;
                }

                const rawContent = lines.slice(1, contentEndIndex + 1).join('\n').trim();
                const content = processContent(rawContent);

                const postDiv = document.createElement('div');
                postDiv.className = 'blog-post' + (post.pinned ? ' pinned' : '');
                postDiv.setAttribute('role', 'article');
                postDiv.setAttribute('tabindex', '0');
                
                let html = '<div class="blog-post-main">';
                html += '<h2><span>' + title + '</span>';
                if (post.pinned) {
                    html += '<svg class="pin-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14,4v5c0,1.12,0.37,2.16,1,3H9c0.65-0.86,1-1.9,1-3V4H14 M17,2H7C6.45,2,6,2.45,6,3c0,0.55,0.45,1,1,1c0,0,0,0,0,0l1,0v5 c0,1.66-1.34,3-3,3v2h5.97v7l1,1l1-1v-7H19v-2c-1.66,0-3-1.34-3-3V3l1,0c0,0,0,0,0,0c0.55,0,1-0.45,1-1C18,2.45,17.55,2,17,2L17,2 z"/></svg>';
                }
                if (tags.length > 0) {
                    html += '<span class="post-tags">';
                    tags.forEach(tag => {
                        html += '<span class="post-tag" onclick="event.stopPropagation(); setTagFilter(\'' + tag.replace(/'/g, "\\'") + '\')">' + tag + '</span>';
                    });
                    html += '</span>';
                }
                html += '</h2>';
                html += '<div class="blog-post-content">' + content + '</div>';
                if (date) html += '<div class="blog-post-date">' + date + '</div>';
                html += '</div>';
                
                if (image) {
                    html += '<img src="' + image + '" class="blog-post-image" alt="">';
                }
                
                postDiv.innerHTML = html;
                postDiv.addEventListener('click', () => openPostFullscreen(title, content, date, post.pinned, image, tags));
                postDiv.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openPostFullscreen(title, content, date, post.pinned, image, tags);
                    }
                });
                container.appendChild(postDiv);
            });
        }

        function openPostFullscreen(title, content, date, isPinned, image, tags) {
            modalContent.className = 'modal-content fullscreen';
            let html = '<button class="modal-close" onclick="closeModal()">×</button>';
            html += '<div style="text-align: left;"><h2 style="margin-bottom: 30px; font-size: 32px; display: flex; align-items: center; flex-wrap: wrap; gap: 10px;"><span>' + title + '</span>';
            if (isPinned) {
                html += '<svg style="display: inline-block; margin-left: 10px; width: 36px; height: 36px; vertical-align: middle; transform: rotate(45deg); color: #888;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14,4v5c0,1.12,0.37,2.16,1,3H9c0.65-0.86,1-1.9,1-3V4H14 M17,2H7C6.45,2,6,2.45,6,3c0,0.55,0.45,1,1,1c0,0,0,0,0,0l1,0v5 c0,1.66-1.34,3-3,3v2h5.97v7l1,1l1-1v-7H19v-2c-1.66,0-3-1.34-3-3V3l1,0c0,0,0,0,0,0c0.55,0,1-0.45,1-1C18,2.45,17.55,2,17,2L17,2 z"/></svg>';
            }
            if (tags && tags.length > 0) {
                html += '<span style="display: inline-flex; gap: 6px;">';
                tags.forEach(tag => {
                    html += '<span style="background: #ff6b9d; color: white; padding: 6px 12px; border-radius: 6px; font-size: 15px; font-weight: 500;">' + tag + '</span>';
                });
                html += '</span>';
            }
            html += '</h2>';
            if (image) {
                html += '<img src="' + image + '" style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px; margin-bottom: 20px;">';
            }
            html += '<div style="font-size: 18px; line-height: 1.6; white-space: pre-wrap;">' + content + '</div>';
            if (date) {
                html += '<div style="margin-top: 30px; font-size: 16px; color: #666; font-style: italic;">' + date + '</div>';
            }
            html += '</div>';
            
            modalContent.innerHTML = html;
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        // Suggestion system
        let suggestionData = {};

        function startSuggestion() {
            modalContent.className = 'modal-content';
            modalContent.innerHTML = `
                <button class="modal-close" onclick="closeModal()">×</button>
                <div style="font-size: 18px; margin-bottom: 10px;">What's your name?</div>
                <input type="text" id="suggestionName" placeholder="Enter your name">
                <div class="modal-buttons">
                    <button class="modal-button" onclick="askForSuggestion()">Continue</button>
                </div>
            `;
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('show');
                document.getElementById('suggestionName').focus();
            }, 10);
        }

        function askForSuggestion() {
            const name = document.getElementById('suggestionName').value.trim();
            if (!name) {
                alert('Please enter your name');
                return;
            }
            
            suggestionData.name = name;
            
            modalContent.innerHTML = `
                <button class="modal-close" onclick="closeModal()">×</button>
                <div style="font-size: 18px; margin-bottom: 10px;">What is your suggestion?</div>
                <input type="text" id="suggestionTitle" placeholder="Title">
                <textarea id="suggestionBody" placeholder="Describe your suggestion..."></textarea>
                <div class="modal-buttons">
                    <button class="modal-button" onclick="submitSuggestion()">Submit</button>
                </div>
            `;
            setTimeout(() => document.getElementById('suggestionTitle').focus(), 100);
        }

        async function submitSuggestion() {
            const title = document.getElementById('suggestionTitle').value.trim();
            const body = document.getElementById('suggestionBody').value.trim();
            
            if (!title || !body) {
                alert('Please fill in both title and body');
                return;
            }
            
            const now = new Date();
            const day = String(now.getDate()).padStart(2, '0');
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const year = now.getFullYear();
            const dateStr = `/[${day}.${month}.${year}]/`;
            
            const content = `${title}\n${body}\n${dateStr}`;
            const suggestionNum = Math.floor(Math.random() * 10000);
            const filename = `${suggestionData.name}_${suggestionNum}.txt`;
            
            // Show loading state
            modalContent.innerHTML = `
                <button class="modal-close" onclick="closeModal()">×</button>
                <div style="font-size: 18px;">Submitting your suggestion...</div>
                <div style="font-size: 14px; color: #666; margin-top: 10px;">Please wait...</div>
            `;
            
            try {
                // GitHub API configuration
                const GITHUB_TOKEN = 'YOUR_GITHUB_TOKEN_HERE'; // Replace with your token
                const REPO_OWNER = 'YOUR_USERNAME'; // Replace with your GitHub username
                const REPO_NAME = 'YOUR_REPO_NAME'; // Replace with your repo name
                const BRANCH = 'main'; // or 'master' depending on your default branch
                
                // Encode content to base64
                const encodedContent = btoa(unescape(encodeURIComponent(content)));
                
                // Create file via GitHub API
                const response = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/suggestions/${filename}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${GITHUB_TOKEN}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: `New suggestion from ${suggestionData.name}`,
                        content: encodedContent,
                        branch: BRANCH
                    })
                });
                
                if (response.ok) {
                    modalContent.innerHTML = `
                        <button class="modal-close" onclick="closeModal()">×</button>
                        <div style="font-size: 18px;">Thank you for your suggestion!</div>
                        <div style="font-size: 14px; color: #666; margin-top: 10px;">Your suggestion has been submitted successfully.</div>
                        <div class="modal-buttons">
                            <button class="modal-button" onclick="closeModal()">Done</button>
                        </div>
                    `;
                } else {
                    throw new Error('Failed to submit');
                }
            } catch (error) {
                // Fallback to download if GitHub API fails
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
                
                modalContent.innerHTML = `
                    <button class="modal-close" onclick="closeModal()">×</button>
                    <div style="font-size: 18px;">Couldn't submit automatically</div>
                    <div style="font-size: 14px; color: #666; margin-top: 10px;">Your suggestion has been downloaded as ${filename}</div>
                    <div style="font-size: 13px; color: #999; margin-top: 10px;">Please send it to the site owner</div>
                    <div class="modal-buttons">
                        <button class="modal-button" onclick="closeModal()">Done</button>
                    </div>
                `;
            }
        }

        // Load posts
        loadBlogPosts();

        // Mobile scroll focus effect
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                         (navigator.maxTouchPoints && navigator.maxTouchPoints > 2);
        
        if (isMobile) {
            let ticking = false;
            
            function updateMobileFocus() {
                const posts = document.querySelectorAll('.blog-post');
                if (posts.length === 0) return;
                
                const viewportCenter = window.innerHeight / 2 + window.scrollY;
                const isAtTop = window.scrollY < 100;
                
                let closestPost = null;
                let closestDistance = Infinity;
                
                posts.forEach(post => {
                    const rect = post.getBoundingClientRect();
                    const postCenter = rect.top + window.scrollY + rect.height / 2;
                    const distance = Math.abs(viewportCenter - postCenter);
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestPost = post;
                    }
                });
                
                posts.forEach(post => {
                    if (post === closestPost && !isAtTop) {
                        post.classList.add('mobile-focused');
                    } else {
                        post.classList.remove('mobile-focused');
                    }
                });
                
                ticking = false;
            }
            
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(updateMobileFocus);
                    ticking = true;
                }
            }, { passive: true });
            
            // Initial check after posts load
            const observer = new MutationObserver(() => {
                const posts = document.querySelectorAll('.blog-post');
                if (posts.length > 0) {
                    updateMobileFocus();
                    observer.disconnect();
                }
            });
            observer.observe(document.getElementById('blogPosts'), { childList: true });
        }
    </script>
</body>
</html>
